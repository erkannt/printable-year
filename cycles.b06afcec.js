const t=document.querySelector("#appContainer");if(!t)throw Error("ERROR: no appContainer found");const e=document.querySelector("#yearInput");if(!e)throw Error("ERROR: no yearInput found");if(!(e instanceof HTMLInputElement))throw Error("ERROR: yearInput not an input");const a=document.querySelector("#shadeWeekends");if(!a)throw Error("ERROR: no shadeWeekendInput found");if(!(a instanceof HTMLInputElement))throw Error("ERROR: shadeWeekendsInput not an input");const n=(t,e)=>{let a=new Date(t,0,7*(13*e)-r(t)),n=[];for(let t=0;t<=90;t++){let e=new Date(a);e.setDate(e.getDate()+t),n.push(e)}return n},r=t=>{let e=new Date(t,0,1),a=e.getDay();return(0===a?6:a-1)-1},o=()=>{let t=new Intl.DateTimeFormat("default",{weekday:"short"}),e=[];for(let a=0;a<=6;a++){let n=new Date(1974,0,a),r=document.createElement("div");// Use a fixed year to ensure the correct weekday
r.textContent=t.format(n),r.classList.add("day-name"),e.push(r)}return e},d=t=>{if(1==t.getDate())return i(t);let e=new Intl.DateTimeFormat("default",{day:"2-digit"}),a=document.createElement("div");return a.textContent=e.format(t),a.classList.add("day-number"),a.classList.add("day","calendarItem"),a.setAttribute("data-month",(t.getMonth()+1).toString()),a.setAttribute("data-dayofweek",t.getDay().toString()),a.setAttribute("data-day",t.getDate().toString()),a},i=t=>{let e=new Intl.DateTimeFormat("default",{month:"short"}),a=document.createElement("div");return a.textContent=e.format(t),a.classList.add("firstOfMonth","day","calendarItem"),a.setAttribute("data-month",(t.getMonth()+1).toString()),a.setAttribute("data-dayofweek",t.getDay().toString()),a.setAttribute("data-day",t.getDate().toString()),a},u=e=>{t.innerHTML="";let r=document.createElement("div");r.id="calendarContainer",r.setAttribute("data-shadeWeekends",String(a.checked)),t.appendChild(r);let i=Array.from({length:4},(t,e)=>e);i.forEach(t=>{let a=document.createElement("div");a.classList.add("quarterContainer"),o().forEach(t=>a.appendChild(t)),n(e,t).forEach((e,n)=>{let r=d(e);r.setAttribute("data-quarter",t.toString()),r.setAttribute("data-cycle",(Math.floor(n/7/4)+1).toString()),r.setAttribute("data-cycleweek",(Math.floor(n/7)%4+1).toString()),a.appendChild(r)}),r.appendChild(a)})};e.addEventListener("change",()=>{u(Number(e.value))}),a.addEventListener("change",()=>{u(Number(e.value))}),e.value=new Date().getFullYear().toString(),u(Number(e.value));