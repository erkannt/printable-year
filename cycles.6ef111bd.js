const t=document.querySelector("#appContainer");if(!t)throw Error("ERROR: no appContainer found");const e=document.querySelector("#yearInput");if(!e)throw Error("ERROR: no yearInput found");if(!(e instanceof HTMLInputElement))throw Error("ERROR: yearInput not an input");const n=document.querySelector("#shadeWeekends");if(!n)throw Error("ERROR: no shadeWeekendInput found");if(!(n instanceof HTMLInputElement))throw Error("ERROR: shadeWeekendsInput not an input");const a=document.querySelector("#boldMonths");if(!a)throw Error("ERROR: no boldMonthsInput found");if(!(a instanceof HTMLInputElement))throw Error("ERROR: boldMonthsInput not an input");const r=(t,e)=>{let n=new Date(t,0,7*(13*e)-o(t)),a=[];for(let t=0;t<=90;t++){let e=new Date(n);e.setDate(e.getDate()+t),a.push(e)}return a},o=t=>{let e=new Date(t,0,1),n=e.getDay();return(0===n?6:n-1)-1},d=()=>{let t=new Intl.DateTimeFormat("default",{weekday:"short"}),e=[];for(let n=0;n<=6;n++){let a=new Date(1974,0,n),r=document.createElement("div");// Use a fixed year to ensure the correct weekday
r.textContent=t.format(a),r.classList.add("day-name"),e.push(r)}return e},i=t=>{if(1==t.getDate())return u(t);let e=new Intl.DateTimeFormat("default",{day:"2-digit"}),n=document.createElement("div");return n.textContent=e.format(t),n.classList.add("day-number"),n.classList.add("day","calendarItem"),n.setAttribute("data-month",(t.getMonth()+1).toString()),n.setAttribute("data-dayofweek",t.getDay().toString()),n.setAttribute("data-day",t.getDate().toString()),n},u=t=>{let e=new Intl.DateTimeFormat("default",{month:"short"}),n=document.createElement("div");return n.textContent=e.format(t),n.classList.add("firstOfMonth","day","calendarItem"),n.setAttribute("data-month",(t.getMonth()+1).toString()),n.setAttribute("data-dayofweek",t.getDay().toString()),n.setAttribute("data-day",t.getDate().toString()),n},l=e=>{t.innerHTML="";let o=document.createElement("div");o.id="calendarContainer",o.setAttribute("data-shadeWeekends",String(n.checked)),o.setAttribute("data-boldMonths",String(a.checked)),t.appendChild(o);let u=Array.from({length:4},(t,e)=>e);u.forEach(t=>{let n=document.createElement("div");n.classList.add("quarterContainer"),d().forEach(t=>n.appendChild(t)),r(e,t).forEach((e,a)=>{let r=i(e);r.setAttribute("data-quarter",t.toString()),r.setAttribute("data-cycle",(Math.floor(a/7/4)+1).toString()),r.setAttribute("data-cycleweek",(Math.floor(a/7)%4+1).toString()),n.appendChild(r)}),o.appendChild(n)})};e.addEventListener("change",()=>{l(Number(e.value))}),n.addEventListener("change",()=>{l(Number(e.value))}),a.addEventListener("change",()=>{l(Number(e.value))}),e.value=new Date().getFullYear().toString(),l(Number(e.value));